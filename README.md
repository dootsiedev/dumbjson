# BS_Archive
This is a JSON-like API for a restrictive style of JSON that acts like binary serialization.\
The most important feature is the symetric read / write system using virtual functions,\
but if you use BS_json and BS_binary you can use templates to avoid virtual functions.\
Used when the file is exclusively generated by the program, a human should not write it.\
This was inspired by a example called "archiver" in the rapidjson examples.\
Limitations:\
-Variables must be ordered, no variable can be missing, no variable can be skipped over.\
-Keys, objects, arrays do nothing in the binary serializer.\
-An annoying limitation is that dynamic sized arrays requires you to specifiy\
 the size of an array ahead of the array (like a pascal string).\
Dynamic arrays require you to check the IsReader flag to properly work with dynamic arrays.\
Note:\
Performance is not the goal for the Binary format (it is faster, but not by 10x),\
the main goal is the size of the file and to prevent people from tinkering with it.\
\
Example:\
```C++
void serialize_data_type(BS_Serializer& ar, data_type& data)
{
	ar.StartObject();
	ar.Key("i");
	ar.Int32(data.i);
	ar.Key("d");
	ar.Double(data.d);
	ar.EndObject();
}
```
This wasn't made to be used as a library that you include into your project. This isn't a high performance serialization library but it's an OK performance serialization library.\
Credit to rapidjson's "Archiver" in the examples directory, which inspired this, and it's better than this library in simplicity.\
This code depends on my very specific and probably poorly designed error handling system called "serr", which is just errno replaced with a single std::string, which makes errors look like a lazy dump of information, but I like it because it's simple.\
\
Dumbjson was the first project (why this repo is called dumbjson) and it is a Rapidjson DOM api wrapper and it will print errors if you use it correctly, but I wouldn't use it because I don't like how difficult it is to use (it's even harder than just using rapidjson normally).\
Kson is old (and buggy) version of BS_Archive. The benefit over Kson over BS_Archive is that it offers template functions so you can use C++11 lambdas for much easier custom callbacks, and it's faster because no virtual functions and templates (might be worth revival considering the fact you can implement both BS_Archive and kson at the same time, but the performance benefit is miniscule).\
The tests has turned into a mess, dumb_json and kson is mostly dead code, but I am keeping the code for reference.